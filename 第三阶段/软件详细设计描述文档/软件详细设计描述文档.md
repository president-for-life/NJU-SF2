# 影院影片管理系统软件详细设计描述文档

## 文档修改历史

| 修改人员 | 日期 | 修改原因 | 版本号 |
|:--------:| ---- | -------- | ------ |

## 目录

	1. 引言
		1.1 编制目的
		1.2 词汇表
		1.3 参考资料

	2. 产品概述
	3. 系统结构设计概述
	4. 结构视角
		4.1 业务逻辑层的分解
			4.1.1 management模块
			4.1.2 promotion模块
			4.1.3 sales模块
			4.1.4 statistics模块
			4.1.5 user模块

	5. 依赖视角

## 1. 引言

### 1.1 编制目的

本报告详细完成对影院影片管理系统的详细设计，达到指导后续软件构造的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

### 1.2 词汇表

| 词汇名称 | 词汇含义 | 备注 |
|:--------:|:--------:|:----:|
| promotion | 一切刺激观众消费的方式 | 如优惠券、会员卡 |

### 1.3 参考资料

软件开发的技术基础 软件工程与计算（卷二） —— 罗斌、丁二玉、刘钦

## 2. 产品描述

参考影院影片管理系统用例文档和影院影片管理系统软件需求规格说明文档中对产品的概括描述。

## 3. 系统结构设计概述

参考影院影片管理系统概要设计文档中对系统体系结构设计的概述。

## 4. 结构视角

### 4.1 业务逻辑层的分解

业务逻辑层的开发包图参见软件体系结构文档图。

#### 4.1.1 management模块

(1) 模块概述

(2) 整体结构

(3) 模块内部类的接口规范

需要的服务（需接口）

| 服务名                                           | 服务                           |
| ------------------------------------------------ | ------------------------------ |
| HallMapper.selectAllHall()                       | 查找返回所有的持久化对象       |
| HallMapper.selectHallById(int hallId)            | 根据id返回特定单一的持久化对象 |
| HallMapper.insertOneMovie(HallForm addHallForm)  | 增加单一Hall持久化对象         |
| HallMapper..updateMovie(HallForm updateHallForm) | 更新单一Hall持久化对象         |

(4) 业务逻辑层的动态模型

(5) 业务逻辑层的设计原理

#### 4.1.2 promotion模块

(1) 模块概述

(2) 整体结构

(3) 模块内部类的接口规范

(4) 业务逻辑层的动态模型

(5) 业务逻辑层的设计原理

#### 4.1.3 sales模块

(1) 模块概述

(2) 整体结构

(3) 模块内部类的接口规范

TicketServiceImpl的接口规范如下表所示。

<table>
<tr><td colspan="3"><center>提供的服务（供接口）</center></td></tr>

<tr><td rowspan="4">TicketServiceImpl.refundTicket</td></tr>
<tr><td>语法</td><td>public ResponseVO refundTicket(int ticketId)</td></tr>
<tr><td>前置条件</td><td>订单已支付并未出票</td></tr>
<tr><td>后置条件</td><td>依据退票策略来退票</td></tr>

<tr><td rowspan="4">TicketServiceImpl.addRefundTicketStrategy</td></tr>
<tr><td>语法</td><td>public ResponseVO addRefundTicketStrategy(RefundTicketStrategyForm refundTicketStrategyForm)</td></tr>
<tr><td>前置条件</td><td>无</td></tr>
<tr><td>后置条件</td><td>新增退票策略</td></tr>

<tr><td rowspan="4">TicketServiceImpl.updateRefundTicketStrategy</td></tr>
<tr><td>语法</td><td>public ResponseVO updateRefundTicketStrategy(RefundTicketStrategyForm updateRefundTicketStrategyForm)</td></tr>
<tr><td>前置条件</td><td>无</td></tr>
<tr><td>后置条件</td><td>修改退票策略</td></tr>

<tr><td colspan="3"><center>需要的服务（需接口）</center></td></tr>

<tr><td rowspan="4">TicketMapper.selectTicketById</td></tr>
<tr><td>语法</td><td>public Ticket selectTicketById(int ticketId)</td></tr>
<tr><td>前置条件</td><td>无</td></tr>
<tr><td>后置条件</td><td>返回指定id的电影票</td></tr>

<tr><td rowspan="4">RefundTicketStrategyMapper.getTimeLimit</td></tr>
<tr><td>语法</td><td>public Ticket getTimeLimit()</td></tr>
<tr><td>前置条件</td><td>无</td></tr>
<tr><td>后置条件</td><td>返回可退电影票的时限</td></tr>

<tr><td rowspan="4">RefundTicketStrategyMapper.getProportion</td></tr>
<tr><td>语法</td><td>public double getProportion()</td></tr>
<tr><td>前置条件</td><td>无</td></tr>
<tr><td>后置条件</td><td>返回退票金额的比例</td></tr>

<table>


(4) 业务逻辑层的动态模型

(5) 业务逻辑层的设计原理

#### 4.1.4 statistics模块

(1) 模块概述

(2) 整体结构

(3) 模块内部类的接口规范

(4) 业务逻辑层的动态模型

(5) 业务逻辑层的设计原理

#### 4.1.5 user模块

(1) 模块概述

(2) 整体结构

(3) 模块内部类的接口规范

需要的服务（需接口）

| 服务名                                                       | 服务                                              |
| ------------------------------------------------------------ | ------------------------------------------------- |
| UserMapper.selectAllCommander()                              | 查找返回所有身份是Commander（管理员）的持久化对象 |
| UserMapper.selectUserById(int userId)                        | 根据id返回特定单一的持久化对象                    |
| UserMapper.insertOneCommander(CommanderVO addCommanderVO)    | 增加单一User持久化对象                            |
| UserMapper..updateCommander(CommanderForm updateCommanderForm) | 更新单一User持久化对象                            |
| UserMapperMapper.deleteUser(int userId)                      | 删除单一User持久化对象                            |
|                                                              |                                                   |

提供的服务（）

(4) 业务逻辑层的动态模型

(5) 业务逻辑层的设计原理

## 5. 依赖视角

下图是包之间的依赖关系。

![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1%E6%8F%8F%E8%BF%B0%E6%96%87%E6%A1%A3/%E5%9B%BE%E7%89%87/%E5%8C%85%E5%9B%BE.jpg)
