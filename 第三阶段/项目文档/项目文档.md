# 项目文档

| 修改人员 | 日期 | 变更原因 | 版本号 |
| :------- | :--- | :------- | :----- |
| 梁正川 | 2019/05/21 | 增加4.1-4.4 | V0.1 |
| 戴羽涵 | 2019/05/21 | 增加4.5-4.9 | V0.2 |
| 徐志乐 | 2019/05/21 | 增加4.10-4.12 | V0.3 |
| 石創烽 | 2019/05/21 | 增加4.13-4.15 | V0.4 |

## 0. 目录

	1. 引言
	2. 用例图
	3. 用例列表
	4. 详细用例描述
	5. 需求分析模型

## 1. 引言

	1.1 目的
	本文档描述了影院影片管理系统的用户需求。
	
	1.2 参考文献
	无。

## 2. 用例图

**todo 石创峰**

## 3. 用例列表

### 经理
* 影院角色的增删改查

### 管理员
* 会员卡充值优惠策略管理
* 退票策略管理
* 影厅信息管理
* 赠送优惠券

### 观众
* 取票
* 退票
* 查看历史充值
* 查看历史消费记录
* 会员卡自我管理

## 4. 详细用例描述

### 4.1 会员卡充值优惠策略管理

- 用例编号：UA1

- 名称：发布会员卡

- 创建者：梁正川

- 创建日期：2019/05/21

- 最后一次更新者：梁正川

- 更新日期：2019/06/18

- 参与者：管理员

- 触发条件：管理员需要发布或修改会员卡充值优惠策略

- 前置条件：管理员必须已被识别和授权

- 后置条件：记录更改后的会员卡充值优惠策略

- 优先级：高

- 正常流程：

	1.0 发布会员卡充值优惠策略
	1. 管理员选择发布会员卡充值优惠策略
	2. 管理员输入会员卡价格、描述、优惠需满金额、赠送金额
	3. 系统显示会员卡列表

	1.1 修改会员卡充值优惠策略
	1. 管理员选择某已有会员卡充值优惠策略
	2. 管理员修改会员卡价格、描述、优惠需满金额、赠送金额中的一项或多项
	3. 系统显示会员卡列表

- 扩展流程：

	1.1
	3a. 已有观众使用该会员卡
		1. 系统提示已有观众使用该会员卡，会员卡充值优惠策略修改失败

- 特殊需求：

	1. 考虑对已购买该会员卡的影响。

### 4.3 会员卡自我管理

- 用例编号：UA3

- 名称：购买会员卡

- 创建者：梁正川

- 创建日期：2019/05/21

- 最后一次更新者：梁正川

- 更新日期：2019/05/21

- 参与者：观众

- 触发条件：观众想要享受会员卡充值优惠策略

- 前置条件：观众必须已被识别和授权

- 后置条件：记录观众持有的会员卡

- 优先级：高

- 正常流程：

	1. 观众选择某会员卡，确认购买
	2. 观众输入银行卡号和密码
	3. 系统显示新购买的会员卡的会员卡号、入会日期、会员卡类型、充值优惠、余额

- 扩展流程：

	2a. 银行卡号或密码错误
		1. 系统提示银行卡号或密码错误

- 特殊需求：

	无

### 4.4 切换会员卡

- 用例编号：UA3

- 名称：切换会员卡

- 创建者：梁正川

- 创建日期：2019/05/21

- 最后一次更新者：梁正川

- 更新日期：2019/05/21

- 参与者：观众

- 触发条件：观众想要切换会员卡充值优惠策略

- 前置条件：观众必须已被识别和授权

- 后置条件：记录观众持有的会员卡

- 优先级：高

- 正常流程：

	1. 观众选择切换会员卡
	2. 系统显示所有会员卡种类
	3. 观众选择某会员卡
	4. 观众输入银行卡号和密码
	5. 系统显示新购买的会员卡的会员卡号、入会日期、会员卡类型、充值优惠、余额

- 扩展流程：

	4a. 银行卡号或密码错误
		1. 系统提示银行卡号或密码错误

- 特殊需求：

	无

### 4.5 管理退票策略

- 用例编号：UA3

- 名称：管理退票策略

- 创建者：戴羽涵

- 创建日期：2019/05/21

- 最后一次更新者：戴羽涵

- 更新日期：2019/06/18

- 参与者：影院管理员

- 触发条件：新的退票策略需要被添加或已有的退票策略的相应内容需要被修改

- 前置条件：影院管理人员必须已经被识别和授权

- 后置条件：记录新增的退票策略或记录修改的退票策略

- 优先级：高

- 正常流程：

	1.0 新增退票策略
	1. 管理员请求新增退票策略
	2. 系统显示新增退票策略的界面
	3. 管理员输入新增的退票策略的详细信息（包括：是否允许退票、返还比例、允许开场前退票的时间限制）并确认
	4. 系统记录新增的退票策略

	1.2 修改退票策略
	1. 管理员选择修改某退票策略
	2. 系统显示修改退票策略的界面
	3. 管理人员修改相应的退票策略的内容（包括是否允许退票、返还比例、允许开场前退票的时间限制）并确认
	4. 系统记录修改的退票策略

	1.3 新增使用某退票策略的电影
	1. 管理员选择修改一个已有的退票策略对应的电影列表
	2. 系统显示该退票策略能够被增加的电影列表
	3. 管理员选择该电影列表中要添加的电影并确定
	4. 系统记录修改过后退票策略对应的电影列表

	1.4 删除使用某退票策略的电影
	1. 管理员选择一个已有的退票策略对应的电影列表中的某电影进行删除
	2. 系统询问是否删除该电影
	3. 管理员确定
	4. 系统记录修改过后退票策略对应的电影列表

- 扩展流程：

	3a. 管理人员取消
		1. 系统取消该流程

- 特殊需求：

	修改退票策略的相应内容需要考虑对用户退票的影响。

### 4.6 用户取票

- 用例编号：UA4

- 名称：戴羽涵

- 创建者：戴羽涵

- 创建日期：2019/05/24

- 最后一次更新者：戴羽涵

- 更新日期：2019/06/18

- 参与者：观众

- 触发条件：观众想要取票

- 前置条件：观众必须已被识别和授权

- 后置条件：更新被成功取票的电影票

- 优先级：高

- 正常流程：

	1. 用户选择某已支付但未取票的电影票，请求取票
	2. 系统显示该电影票的详细信息（包括电影票号、电影名称、影厅号、场次开始时间、场次结束时间、座位号）
	3. 观众确认取票
	4. 系统记录被成功取票的电影票

- 扩展流程：

	3a. 用户取消取票
		1. 系统取消该流程

- 特殊需求：

	无

### 4.7 用户退票

- 用例编号：UA5

- 名称：用户退票

- 创建者：戴羽涵

- 创建日期：2019/05/21

- 最后一次更新者：戴羽涵

- 更新日期：2019/06/18

- 参与者：观众

- 触发条件：观众想要退票

- 前置条件：观众必须已被识别和授权

- 后置条件：更新成功退票的电影票

- 优先级：高

- 正常流程：

	1. 用户选择某已支付但未取票的电影票，请求退票
	2. 系统显示该电影票的详细信息（包括电影票号、电影名称、影厅号、距离开影时间、座位号、实际支付、退款金额、银行卡号）
	3. 用户确定退票
	4. 系统记录被成功退票的电影票

- 扩展流程：

	2a. 当用户选择的电影票的放映时间在限制的开场时间以内，或者对应的退票策略不允许退票，或者该电影没有对应的退票策略
		1. 系统提示用户该电影票不能退票
	2b. 当用户在退票期间，管理员修改了退票策略
		1. 系统提示用户该退票策略已经被修改，需重新开始退票
		2. 返回正常流程的第1步
	2c. 用户取消退票
		1. 系统取消该流程

- 特殊需求：

	1. 用户成功退票后的钱返还到用户的银行卡中
	2. 在发生退票时，只退换用户购票时使用现金支付的金额，优惠券不予以退换

### 4.8 影厅信息录入

- 用例编号：UA6

- 名称：影厅信息录入

- 创建者：徐志乐

- 创建日期：2019/05/21

- 最后一次更新者：徐志乐

- 更新日期：2019/05/21

- 参与者：影院管理员

- 触发条件：

- 前置条件：

- 后置条件：

- 优先级：

- 正常流程：

	1. 录入影院的影厅信息（名称、座位信息、大/中/小等）。

- 扩展流程：

- 特殊需求：

### 4.9 修改影厅信息

- 用例编号：UA7

- 名称：修改影厅信息

- 创建者：徐志乐

- 创建日期：2019/05/21

- 最后一次更新者：徐志乐

- 更新日期：2019/05/21

- 参与者：影院管理员

- 触发条件：

- 前置条件：

- 后置条件：

- 优先级：

- 正常流程：

	1. 选择需要修改的影厅，录入影厅新的信息。

- 扩展流程：

- 特殊需求：

	1. 正在使用中的影厅不推荐可修改信息，会影响已发售的影票和排片等。

### 4.10 影院角色的增删改查

- 用例编号：UA8

- 名称：影院角色的增删改查

- 创建者：徐志乐

- 创建日期：2019/05/21

- 最后一次更新者：徐志乐

- 更新日期：2019/05/21

- 参与者：影院管理员

- 触发条件：

- 前置条件：

- 后置条件：

- 优先级：

- 正常流程：

	1. 管理影院员工（售票员）账号信息。

- 扩展流程：

- 特殊需求：

### 4.11 查看历史充值

- 用例编号：UA9

- 名称：查看历史充值记录

- 创建者：石創烽

- 创建日期：2019/05/21

- 最后一次更新者：石創烽

- 更新日期：2019/05/21

- 参与者：观众

- 触发条件：

- 前置条件：

- 后置条件：

- 优先级：

- 正常流程：

  1. 用户查看充值记录。
  2. 系统展示用户充值记录。
  3. 用户点击某一项充值记录。
  4. 系统展示充值记录详情。

- 扩展流程：

- 特殊需求：

### 4.12 查看历史消费记录

- 用例编号：UA10

- 名称：查看历史消费记录

- 创建者：石創烽

- 创建日期：2019/05/21

- 最后一次更新者：石創烽

- 更新日期：2019/05/21

- 参与者：观众

- 触发条件：

- 前置条件：

- 后置条件：

- 优先级：

- 正常流程：

  1. 用户查看消费记录。
  2. 系统展示用户消费记录。
  3. 用户点击某一项消费记录。
  4. 系统展示该消费记录的详情。

- 扩展流程：

- 特殊需求：

### 4.13 赠送优惠券

- 用例编号：UA11

- 名称：赠送优惠券

- 创建者：石創烽

- 创建日期：2019/05/21

- 最后一次更新者：石創烽

- 更新日期：2019/05/21

- 参与者：影院管理员

- 触发条件：

- 前置条件：

- 后置条件：

- 优先级：

- 正常流程：

	1. 管理员按条件查询消费达到一定金额的会员名单。
	2. 管理员查询优惠券。
	3. 管理员选择部分会员赠送优惠券。

- 扩展流程：

- 特殊需求：

## 5. 需求分析模型

### 5.1 系统顺序图

### 5.2 概念类图

### 5.3 状态图
