# 项目文档

| 修改人员 | 日期 | 变更原因 | 版本号 |
| :------- | :--- | :------- | :----- |
| 梁正川 | 2019/05/21 | 增加4.1-4.4 | V0.1 |
| 戴羽涵 | 2019/05/21 | 增加4.5-4.9 | V0.2 |
| 徐志乐 | 2019/05/21 | 增加4.10-4.12 | V0.3 |
| 石創烽 | 2019/05/21 | 增加4.13-4.15 | V0.4 |
| 梁正川 | 2019/06/19 | 将与会员卡充值优惠策略管理有关的用例合并为一个用例，将用例粒度变大 |  V0.5 |
| 戴羽涵 | 2019/06/19 | 将与退票策略管理有关的用例合并为一个用例，将用例粒度变大 |  V0.6 |

## 0. 目录

	1. 引言
	2. 用例图
	3. 用例列表
	4. 详细用例描述
	5. 需求分析模型

## 1. 引言

### 1.1 目的

本文档描述了影院管理系统的用户需求。
	
### 1.2 参考文献

无。

### 1.3 词汇表

| 词汇名称 | 词汇含义 | 备注 |
| :------: | -------- | ---- |
| 会员卡 | 影院管理系统中存在多种会员卡充值优惠策略，一个会员卡只能使用一种充值优惠策略。观众只能拥有一种会员卡，该卡使用的优惠策略可以在这多种策略中选一种，多种优惠策略在观众看来就是多种会员卡。 |      |

## 2. 用例图

![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%A8%E4%BE%8B%E5%9B%BE.png)

## 3. 用例列表

### 经理
* 影院角色的增删改查

### 管理员
* 会员卡充值优惠策略管理
* 退票策略管理
* 影厅信息管理
* 赠送优惠券

### 观众
* 取票
* 退票
* 查看历史充值
* 查看历史消费记录
* 会员卡自我管理

## 4. 详细用例描述

### 4.1 会员卡充值优惠策略管理

- 用例编号：UA1

- 名称：会员卡充值优惠策略管理

- 创建者：梁正川

- 创建日期：2019/05/21

- 最后一次更新者：梁正川

- 更新日期：2019/06/18

- 参与者：管理员

- 触发条件：管理员需要发布或修改会员卡充值优惠策略

- 前置条件：管理员必须已被识别和授权

- 后置条件：记录更改后的会员卡充值优惠策略

- 优先级：高

- 正常流程：

	1.0 发布会员卡充值优惠策略
	1. 管理员选择发布会员卡充值优惠策略
	2. 系统提示输入会员卡价格、描述、优惠需满金额、赠送金额
	3. 管理员输入会员卡价格、描述、优惠需满金额、赠送金额
	3. 系统显示会员卡列表

	1.1 修改会员卡充值优惠策略
	1. 管理员选择某已有会员卡充值优惠策略
	2. 系统提示输入会员卡价格、描述、优惠需满金额、赠送金额
	3. 管理员修改会员卡价格、描述、优惠需满金额、赠送金额中的一项或多项
	4. 系统显示会员卡列表
	
	1.2 删除会员卡充值优惠策略
	1. 管理员选择某已有会员卡充值优惠策略
	2. 系统提示删除
	3. 管理员删除
	4. 系统显示会员卡列表

- 扩展流程：

	1.1
	3a. 已有观众使用该会员卡
		1. 系统提示已有观众使用该会员卡，会员卡充值优惠策略修改失败
	
	1.2
	3a. 已有观众使用该会员卡
		1. 系统提示已有观众使用该会员卡，会员卡充值优惠策略修改失败

- 特殊需求：

	无

### 4.3 会员卡自我管理

- 用例编号：UA3

- 名称：会员卡自我管理

- 创建者：梁正川

- 创建日期：2019/05/21

- 最后一次更新者：梁正川

- 更新日期：2019/05/21

- 参与者：观众

- 触发条件：观众想要享受或更换会员卡充值优惠策略

- 前置条件：观众必须已被识别和授权

- 后置条件：记录观众持有的会员卡

- 优先级：高

- 正常流程：

	1.0 购买会员卡
	1. 观众选择某会员卡，确认购买
	2. 观众输入银行卡号和密码
	3. 系统显示新购买的会员卡的会员卡号、入会日期、会员卡类型、充值优惠、余额
	
	1.1 切换会员卡
	1. 观众选择切换会员卡充值优惠策略
	2. 系统显示所有会员卡种类
	3. 观众选择某会员卡充值优惠策略
	4. 观众输入银行卡号和密码
	5. 系统显示新购买的会员卡的会员卡号、入会日期、会员卡类型、充值优惠、余额

- 扩展流程：

	1.0
	2a. 银行卡号或密码错误
		1. 系统提示银行卡号或密码错误
	
	1.1
	4a. 银行卡号或密码错误
		1. 系统提示银行卡号或密码错误

- 特殊需求：

	无

### 4.5 管理退票策略

- 用例编号：UA3

- 名称：管理退票策略

- 创建者：戴羽涵

- 创建日期：2019/05/21

- 最后一次更新者：戴羽涵

- 更新日期：2019/06/18

- 参与者：影院管理员

- 触发条件：新的退票策略需要被添加或已有的退票策略的相应内容需要被修改

- 前置条件：影院管理人员必须已经被识别和授权

- 后置条件：记录新增的退票策略或记录修改的退票策略

- 优先级：高

- 正常流程：

	1.0 新增退票策略
	1. 管理员请求新增退票策略
	2. 系统显示新增退票策略的界面
	3. 管理员输入新增的退票策略的详细信息（包括：是否允许退票、返还比例、允许开场前退票的时间限制）并确认
	4. 系统记录新增的退票策略

	1.2 修改退票策略
	1. 管理员选择修改某退票策略
	2. 系统显示修改退票策略的界面
	3. 管理人员修改相应的退票策略的内容（包括是否允许退票、返还比例、允许开场前退票的时间限制）并确认
	4. 系统记录修改的退票策略

	1.3 新增使用某退票策略的电影
	1. 管理员选择修改一个已有的退票策略对应的电影列表
	2. 系统显示该退票策略能够被增加的电影列表
	3. 管理员选择该电影列表中要添加的电影并确定
	4. 系统记录修改过后退票策略对应的电影列表

	1.4 删除使用某退票策略的电影
	1. 管理员选择一个已有的退票策略对应的电影列表中的某电影进行删除
	2. 系统询问是否删除该电影
	3. 管理员确定
	4. 系统记录修改过后退票策略对应的电影列表

- 扩展流程：

	3a. 管理人员取消
		1. 系统取消该流程

- 特殊需求：

	修改退票策略的相应内容需要考虑对用户退票的影响。

### 4.6 用户取票

- 用例编号：UA4

- 名称：戴羽涵

- 创建者：戴羽涵

- 创建日期：2019/05/24

- 最后一次更新者：戴羽涵

- 更新日期：2019/06/18

- 参与者：观众

- 触发条件：观众想要取票

- 前置条件：观众必须已被识别和授权

- 后置条件：更新被成功取票的电影票

- 优先级：高

- 正常流程：

	1. 用户选择某已支付但未取票的电影票，请求取票
	2. 系统显示该电影票的详细信息（包括电影票号、电影名称、影厅号、场次开始时间、场次结束时间、座位号）
	3. 观众确认取票
	4. 系统记录被成功取票的电影票

- 扩展流程：

	3a. 用户取消取票
		1. 系统取消该流程

- 特殊需求：

	无

### 4.7 用户退票

- 用例编号：UA5

- 名称：用户退票

- 创建者：戴羽涵

- 创建日期：2019/05/21

- 最后一次更新者：戴羽涵

- 更新日期：2019/06/18

- 参与者：观众

- 触发条件：观众想要退票

- 前置条件：观众必须已被识别和授权

- 后置条件：更新成功退票的电影票

- 优先级：高

- 正常流程：

	1. 用户选择某已支付但未取票的电影票，请求退票
	2. 系统显示该电影票的详细信息（包括电影票号、电影名称、影厅号、距离开影时间、座位号、实际支付、退款金额、银行卡号）
	3. 用户确定退票
	4. 系统记录被成功退票的电影票

- 扩展流程：

	2a. 当用户选择的电影票的放映时间在限制的开场时间以内，或者对应的退票策略不允许退票，或者该电影没有对应的退票策略
		1. 系统提示用户该电影票不能退票
	2b. 当用户在退票期间，管理员修改了退票策略
		1. 系统提示用户该退票策略已经被修改，需重新开始退票
		2. 返回正常流程的第1步
	2c. 用户取消退票
		1. 系统取消该流程

- 特殊需求：

	1. 用户成功退票后的钱返还到用户的银行卡中
	2. 在发生退票时，只退换用户购票时使用现金支付的金额，优惠券不予以退换

### 4.8 影厅管理

- 用例编号：UA6

- 名称：影厅管理

- 创建者：徐志乐

- 创建日期：2019/05/21

- 最后一次更新者：徐志乐

- 更新日期：2019/05/21

- 参与者：影院管理员

- 触发条件：影厅需要进行更新

- 前置条件：影院管理员必须已被识别和授权

- 后置条件：影厅信息得到更新

- 优先级：高

- 正常流程：

  1.0 增加影厅信息  
    1. 管理员选择增加影厅。
    2. 管理员输入新的影厅的信息。
    3. 管理员确认新的影厅的信息。
    4. 影厅界面更新，增加新的影厅信息。

  2.0 修改影厅信息
  	1. 选择需要修改的影厅。
	2. 输入修改的影厅信息。
	3. 确认修改的影厅信息。
	4. 影厅信息被修改，更新影厅界面。	

- 扩展流程：
	1.2a.用户取消输入影厅信息
		返回影厅界面
		
    2.2a.用户取消输入更新的影厅信息
        返回影厅界面
	
- 特殊需求：
	
	1. 正在使用中的影厅不推荐可修改信息，会影响已发售的影票和排片等。


### 4.9 影院角色的增删改查

- 用例编号：UA7

- 名称：影院角色的增删改查

- 创建者：徐志乐

- 创建日期：2019/05/21

- 最后一次更新者：徐志乐

- 更新日期：2019/05/21

- 参与者：影院管理员

- 触发条件：需要更新影院员工信息

- 前置条件：经理的身份必须被识别和授权

- 后置条件：影院员工信息得到更新

- 优先级：高

- 正常流程：

	1.0 添加新的影院员工信息
      1. 经理点击添加Admin
      2. 经理输入员工信息
      3. 经理确认员工信息
      4. 影院员工信息更新，返回影院员工信息画面

	2.0 修改某个影院员工信息
	  1. 经理点击员工
          2. 经理修改员工信息
              3. 经理确认员工信息
                  4. 影院员工信息更新，返回影院员工信息画面

	3.0 删除某个影院员工信息 
	  1. 经理点击员工
          2. 经理点击删除员工
              3. 经理确认员工删除信息
                  4. 影院员工信息更新，返回影院员工信息画面

- 扩展流程：
    1.2 2.2 3.2.a  经理取消操作
      返回影院员工信息界面

- 特殊需求：无

### 4.10 查看历史充值

- 用例编号：UA8

- 名称：查看历史充值记录

- 创建者：石創烽

- 创建日期：2019/05/21

- 最后一次更新者：石創烽

- 更新日期：2019/05/21

- 参与者：观众

- 触发条件：观众想要查看历史充值

- 前置条件：观众必须已被识别和授权

- 后置条件：返回历史充值记录

- 优先级：高

- 正常流程：

  1. 用户选择查看充值记录。
  2. 系统展示该用户充值记录，充值记录包括时间。
  3. 用户点击某一项充值记录。
  4. 系统展示充值记录详情，此时充值记录包括时间，充值金额和冲入金额。

- 扩展流程：

  2a.当用户没有充值记录，系统会显示“无充值记录”。

- 特殊需求：无

### 4.11 查看历史消费记录

- 用例编号：UA9

- 名称：查看历史消费记录

- 创建者：石創烽

- 创建日期：2019/05/21

- 最后一次更新者：石創烽

- 更新日期：2019/05/21

- 参与者：观众

- 触发条件：观众想要看历史消费记录

- 前置条件：观众必须已被识别和授权

- 后置条件：返回历史消费记录

- 优先级：高

- 正常流程：

  1. 用户查看消费记录。
  2. 系统展示用户消费记录，消费记录包括时间。
  3. 用户点击某一项消费记录。
  4. 系统展示该消费记录的详情，此时消费记录包括时间，票价和消费金额。

- 扩展流程：

  2a.当用户没有充值记录，系统会显示“无消费记录”。

- 特殊需求：无

### 4.12 赠送优惠券

- 用例编号：UA10

- 名称：赠送优惠券

- 创建者：石創烽

- 创建日期：2019/05/21

- 最后一次更新者：石創烽

- 更新日期：2019/05/21

- 参与者：影院管理员

- 触发条件：管理员想要赠送某些会员优惠券

- 前置条件：管理员必须已被识别和授权

- 后置条件：某些用户获得优惠券

- 优先级：高

- 正常流程：

  1. 管理员按条件查询消费达到一定金额的会员名单。
  2. 系统返回会员名单。
  3. 管理员查询优惠券。
  4. 系统跳出优惠券的弹窗
  5. 管理员选择部分会员赠送优惠券。

- 扩展流程：

  2.a若无会员名单，系统返回“暂无会员”。

  4.a若无优惠券，系统返回“暂无优惠券”。

- 特殊需求：无

## 5. 需求分析模型

### 5.1 系统顺序图

会员卡充值优惠策略管理顺序图
![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E4%BC%9A%E5%91%98%E5%8D%A1%E5%85%85%E5%80%BC%E4%BC%98%E6%83%A0%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)

会员卡自我管理顺序图
![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E4%BC%9A%E5%91%98%E5%8D%A1%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86%E7%94%A8%E4%BE%8B%E7%9A%84%E5%9B%BE/%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)

退票策略管理顺序图
![](https://github.com/president-for-life/NJU-SF2/blob/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E9%80%80%E7%A5%A8%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/%E9%80%80%E7%A5%A8%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-%E9%A1%BA%E5%BA%8F%E5%9B%BE.png?raw=true)

用户退票顺序图
![](https://github.com/president-for-life/NJU-SF2/blob/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%A8%E6%88%B7%E9%80%80%E7%A5%A8%E7%9A%84%E5%9B%BE/%E7%94%A8%E6%88%B7%E9%80%80%E7%A5%A8-%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE.png?raw=true)

管理员赠送优惠券顺序图

![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E8%B5%A0%E9%80%81%E4%BC%98%E6%83%A0%E5%88%B8%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/CouponSendStrategy.png)

影厅管理的图

![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%BD%B1%E5%8E%85%E7%AE%A1%E7%90%86/1.png)

影厅角色管理顺序图
![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%AE%A1%E7%90%86%E5%91%98%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/1.png)

### 5.2 概念类图

会员卡充值优惠策略管理概念类图
![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E4%BC%9A%E5%91%98%E5%8D%A1%E5%85%85%E5%80%BC%E4%BC%98%E6%83%A0%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE2.png)

会员卡自我管理概念类图
![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E4%BC%9A%E5%91%98%E5%8D%A1%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86%E7%94%A8%E4%BE%8B%E7%9A%84%E5%9B%BE/%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE2.png)

退票策略管理概念类图
![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E9%80%80%E7%A5%A8%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/%E9%80%80%E7%A5%A8%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE2.png)

用户退票概念类图
![](https://github.com/president-for-life/NJU-SF2/blob/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%A8%E6%88%B7%E9%80%80%E7%A5%A8%E7%9A%84%E5%9B%BE/%E7%94%A8%E6%88%B7%E9%80%80%E7%A5%A8-%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE.png?raw=true)

用户取票概念类图
![](https://github.com/president-for-life/NJU-SF2/blob/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%A8%E6%88%B7%E5%8F%96%E7%A5%A8%E7%9A%84%E5%9B%BE/%E7%94%A8%E6%88%B7%E5%8F%96%E7%A5%A8-%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE.png?raw=true)

管理员赠送优惠券概念类图

![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E8%B5%A0%E9%80%81%E4%BC%98%E6%83%A0%E5%88%B8%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/%E8%B5%A0%E9%80%81%E4%BC%98%E6%83%A0%E5%88%B8%E7%9A%84%E7%B1%BB%E5%9B%BE.png)

影院管理的概念类图

![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%BD%B1%E5%8E%85%E7%AE%A1%E7%90%86/%E7%B1%BB%E5%9B%BE.png)

影院角色管理的概念类图

![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/db7581d54cbd30e0b942e0b3da8581eaa17eb681/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%AE%A1%E7%90%86%E5%91%98%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE.png)

### 5.3 状态图

会员卡充值优惠策略管理状态图
![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E4%BC%9A%E5%91%98%E5%8D%A1%E5%85%85%E5%80%BC%E4%BC%98%E6%83%A0%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/%E7%8A%B6%E6%80%81%E5%9B%BE.png)

会员卡自我管理状态图
![](https://raw.githubusercontent.com/president-for-life/NJU-SF2/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E4%BC%9A%E5%91%98%E5%8D%A1%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86%E7%94%A8%E4%BE%8B%E7%9A%84%E5%9B%BE/%E7%8A%B6%E6%80%81%E5%9B%BE.png)

退票策略管理状态图
![](https://github.com/president-for-life/NJU-SF2/blob/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E9%80%80%E7%A5%A8%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86%E7%9A%84%E5%9B%BE/%E9%80%80%E7%A5%A8%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86-%E7%8A%B6%E6%80%81%E5%9B%BE.png?raw=true)

用户退票状态图
![](https://github.com/president-for-life/NJU-SF2/blob/master/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%A8%E6%88%B7%E9%80%80%E7%A5%A8%E7%9A%84%E5%9B%BE/%E7%94%A8%E6%88%B7%E9%80%80%E7%A5%A8-%E7%8A%B6%E6%80%81%E5%9B%BE.png?raw=true)