# 需求规格说明文档

| 修改人员 | 日期 | 变更原因 | 版本号 |
| :------- | :--- | :------- | :----- |
| 梁正川 | 2019/05/22 | 增加自己的用例 | V0.1 |
| 戴羽涵 | 2019/05/22 | 增加4.5-4.9 | V0.2 |
| 徐志乐 | 2019/05/22 | 增加4.10-4.12 | V0.3 |
| 石創烽 | 2019/05/22 | 增加4.13-4.15 | V0.4 |
| 梁正川 | 2019/06/19 | 增加引言、总体描述、详细需求描述中除了功能需求部分 | V0.5 |
| 梁正川 | 2019/06/19 | 修改与会员卡充值优惠策略管理有关的用例 | V0.6 |

## 0. 目录

内容目录
需求规格说明文档

	1. 引言
		1.1 目的
		1.2 范围
		1.3 参考文献
	
	2. 总体描述
		2.1 项目前景
			2.1.1 背景
			2.1.2 业务需求
	
		2.2 项目功能
		2.3 用户特征
		2.4 约束
		2.5 假设与依赖
	
	3. 详细需求描述
		3.1 对外接口需求
			3.1.1 管理员界面
			3.1.2 用户界面
			3.1.3 通信接口
	
		3.2 功能需求
			3.2.1 上架电影用例
				3.2.1.1 特征描述
				3.2.1.2 刺激响应序列
				3.2.1.3 相关功能需求
	
		3.3 非功能需求
			3.3.1 安全性
			3.3.2 可维护性
			3.3.3 易用性
			3.3.4 可靠性
			3.3.5 业务规则
			3.3.6 约束
	
		3.4 数据需求
			3.4.1 数据定义
			3.4.2 默认数据
			3.4.3 数据格式要求
			3.5 其他

## 1. 引言

### 1.1 目的

	本文档描述了影院管理系统的功能需求和非功能需求。开发小组的软件系统实验与验证都以此文档为依据。
	
	除特殊说明外，本文档所包含的需求都是高优先级需求。

### 1.2 范围

	影院管理系统是为XXX电影院开发的业务系统，开发的目的是帮助该影院处理日常的影片管理业务，包括影片上架、影片统计，及其观众的影片信息业务，包括影片搜索、影片信息观察和影片标记。
	
	通过影院管理系统的应用，期望为XXX影院提高影片人员管理效率，降低人工管理成本，减少影片排片浪费、吸引观众并提高满意度、提高观看人数和利润。

### 1.3 参考文献

	1）IEEE标准。
	
	2）连续商店管理系统MSCS用例文档V1.0。

### 1.4 词汇表

| 词汇名称 | 词汇含义 | 备注 |
| :------: | -------- | ---- |
| 会员卡 | 影院管理系统中存在多种会员卡充值优惠策略，一个会员卡只能使用一种充值优惠策略。观众只能拥有一种会员卡，该卡使用的优惠策略可以在这多种策略中选一种，多种优惠策略在观众看来就是多种会员卡。 |      |

## 2. 总体描述

### 2.1 项目前景

#### 2.1.1 背景与机遇

	XXX影院据负责人刘钦的描述是一家即将倒闭的影院。影院缺少操作管理系统和自己的网站，这已经不能适应现代的观众业务需求。首先是随着计算机网络和移动互联网的发展，顾客网上了解电影和网上选择电影的需求大幅增长，传统影院运作方式效率低下，影院不能了解观众的具体需求，观众也不能方便地了解影院的影片内容，导致观众流失。其次是影院面临的竞争成本比以前更大，希望在降低管理成本、吸引观众、增强竞争力的同时，保持盈利水平。


	影院管理系统就是为满足XXX影院新的业务发展需求而开发的，它包括一个网页客户端和一个数据集中服务器。网站网页客户端实现系统用户层面的具体操作，完成日常任务，数据集中服务器将所有的数据存储起来进行维护。客户端与数据集中服务器采用实时通信的方式完成数据交换。


#### 2.1.2 业务需求

    BR1: 在系统使用6个月之后，影片上座率提高50%。
    BR2：在系统使用3个月后，影片管理员工作效率提高50%。
    BR3：在系统使用6个月之后，运营成本要降低15%。
         范围：人力成本和影片放映成本
    BR4：在系统使用6个月后，影院盈利利润要提高20%。
         最好情况：40%
         最可能情况：20%
         最坏情况：10%

### 2.2 项目功能

    SF1：分析影片上座率，发现可能的影片影院排片浪费的现象。
    SF2：根据市场变化调整上映的电影。
    SF3：掌握管理员变动和授权情况。
    SF5：发展会员，增高观众对影院的依赖性。
    SF6：制定优惠活动，提高观众观影积极性。
    SF7：帮助管理员了解各影片销售情况。

### 2.3 用户特征

| 参与者           | 特征 |
| :--------------- | :---------------- |
| 影院管理员 | 影院有2~3个影院管理员，他们每天都要进行影片统计，处理即将上映的影片，管理优惠活动、优惠券赠送、会员卡。他们平均每天上架或下架一部电影，调整影片的排片，需要不定时发布优惠活动。由于人工操作容易出错，所以他们对软件的依赖很大。影片管理员的计算机操作能力较好。 |
| 经理 | 影院有一个经理，他只负责管理影院管理员的人事安排，包括入职、离职。他每个月一般只处理少于十个人事安排。经理计算机操作能力不好。 |
| 观众 | 影院的所有目标客户都可能成为观众，他们人数大概在几百到几千不等。他们需要通过网页搜索影片、查找影片相关信息、买票并且标记想看的电影。因为任何人都有可能成为观众，所以观众的电脑水平参差不齐，它们对软件的依赖性很大。他们无法也不需要进行复杂的软件操作。希望新系统尽可能帮他们设计操作简易的网页客户端。|

### 2.4 约束

	CON1：客户端将以HTML网页的形式展现。
	CON2：系统采用图形交互界面。
	CON3：项目要使用持续集成方法进行开发。
	CON4：在开发中，开发者要提交软件需求规格说明文档、设计描述文档和测试报告。

### 2.5 假设与依赖

	AE1：在单个影片想看人数低于所有影片想看人数的3%之前，影片不会被下架。
	AE2：当前上映影片的排片率分布与上一批影片的排片率分布基本一致，影片排片情况比较稳定。
	AE3：大多数观众不会恶意先买票然后退票。

## 3. 详细需求描述

### 3.1 对外接口需求

#### 3.1.1 经理界面

UI1 员工管理

	UI1.1 经理登录时，自动跳转到员工管理界面，系统应在页面显示所有影院员工admin信息，并在右上角显示添加admin按钮
	
	UI1.2 经理点击添加admin按钮时，系统弹出添加新的admin的界面
	
		UI1.2.1 系统显示用户名、密码输入框，用于录入admin信息
		
		UI1.2.2 经理点击确认后，输入框中的admin信息应被系统录入并在界面更新。
	
	UI1.3 经理点击某员工时，系统弹出该员工的信息界面
	
		UI1.3.1 系统显示用户名、密码输入框，其中填充该用户原本的信息
		
		UI1.3.2 经理可以修改用户名、密码输入框中的内容。
			UI1.3.2.1 如点击确认，则录入并更新影院员工信息，并在界面更新。
		
		UI1.3.3 经理点击删除，弹出确认框。
			UI1.3.3.1 如果经理点击确认，则删除该员工信息，并在界面更新。

#### 3.1.2 管理员界面

UI1 会员卡充值优惠策略管理

	UI1.1 管理员点击会员卡管理时，系统应在页面显示所有已发布的会员卡充值优惠策略列表，并在右上方显示发布按钮。
	
	UI1.2 管理员点击发布按钮时，系统应弹出发布会员卡充值优惠策略的弹窗。
	
		UI1.2.1 系统应显示描述、价格、须满金额、优惠金额输入框。
	
		UI1.2.2 管理员点击确认后，系统应该把发布后的策略加到列表中。
	
	UI1.3 管理员点击某已发布的策略时，系统应弹出修改会员卡充值优惠策略的弹窗。
	
		UI1.2.1 系统应显示描述、价格、须满金额、优惠金额输入框。
	
		UI1.2.2 管理员点击删除后，系统应该把删除的策略从列表中移除。
	
			UI1.2.2.1 若有观众正在使用该策略，系统应提示存在会员卡使用该充值优惠策略。
	
		UI1.2.3 管理员点击修改后，系统应该把修改的策略在列表中更新。
	
			UI1.2.3.1 若有观众正在使用该策略，系统应提示存在会员卡使用该充值优惠策略。

UI2 退票策略管理

	UI2.1 影院管理员点击“退票策略管理”时，系统应在页面显示所有已发布的退票策略列表，并在页面顶部显示“新增退票策略”按钮，在每个退票策略中显示“新增电影”按钮。
	
	UI2.2 管理员点击“新增退票策略”按钮，系统应显示新增退票策略界面，点击确认后，系统应显示新增的退票策略。
	
		UI2.2.1 若管理员输入的信息为空，系统应提示内容不可为空。
	
	UI2.3 管理员点击某退票策略，系统应显示修改退票策略界面，点击确定后，系统应更新该退票策略的显示。
	
		UI2.3.1 若管理员输入的信息为空，系统应提示内容不可为空。
	
	UI2.4 管理员点击“新增电影”按钮，系统应显示新增电影界面，管理员选择新增的电影后，点击确定，系统应更新该退票策略的电影列表。
	
	UI2.5 管理员点击某个退票策略的电影列表中的某个电影，系统应提示管理员是否删除该电影，点击确定后，系统更新该退票策略的电影列表。

UI3 优惠券管理

	UI3.1 影院管理员点击“赠送优惠券”时，系统显示所有的会员，并在页面顶部显示“达到消费金额”的输入框，在页面底部显示“赠送优惠券”按钮，在每个会员中显示选择框，会员底部有全选的选择框。
	
		UI3.1.1 管理员在“达到消费金额”输入框中输入金额，系统显示消费金额高于此金额的会员的信息（包括会员ID和消费金额）。
	  
	UI3.2 管理员点击会员对应的选择框，点击“赠送优惠券”按钮，系统显示优惠券弹窗，弹窗显示所有有效优惠券的信息（包括名称、描述、使用门槛、优惠金额、可用时间、失效时间），每个优惠券中显示选择框，弹窗底部有“赠送”按钮。
	
		UI3.2.1 管理员点击优惠券对应的选择框，点击“赠送”按钮，系统给对应的会员赠送该优惠券。

UI4 影院管理

	UI4.1 影院管理员点击“影院管理”时，系统显示所有的影院界面，并在顶部显示常规设置，包括用户可见排片时间的设置，在下方显示影厅管理界面，影厅管理界面右上角显示新增影厅，影厅管理界面的内包括所有的影厅的信息。
	
	UI4.2 管理员点击“新增影厅”，弹出新增影厅界面
		UI4.2.1 系统显示影厅名、列数、行数输入框，允许管理员输入。
		UI4.2.2 管理员点击确定，录入影厅信息
		UI4.2.3 影厅信息更新，并且更新影厅信息界面
		
	UI4.3 管理员点击某个影厅，弹出该影厅信息界面。
		UI4.3.1	系统显示影厅名、列数、行数输入框，并自动填充该影厅信息，允许管理员输入。
		UI4.3.2 管理员点击确定，录入新的影厅信息
		UI4.3.3	影厅信息更新，并且更新影厅信息界面。



#### 3.1.3 用户界面

UI1 观众会员卡

	UI1.1 若观众不是会员，系统应在页面显示所有已发布的会员卡充值优惠策略列表，并在下方显示购买按钮。
	
		UI1.1.1 观众选择某会员卡，点击购买按钮后，系统应显示购买弹窗，包含银行卡账号和密码输入框。
	
			UI1.1.1.2 观众输入银行卡账号和密码，点击确认后，若银行卡账号和密码正确，系统应提示购买成功，并显示会员信息，包括会员卡号、入会日期、会员卡类型、充值优惠、余额（为0）。
	
				UI1.1.1.2.1 若银行卡账号和密码为空，系统应提示银行卡账号和密码不为空。
	
				UI1.1.1.2.1 若银行卡账号和密码错误，系统应提示银行卡账号或密码错误。
	
	UI1.1 若观众是会员，系统应在页面显示会员信息，包括会员卡号、入会日期、会员卡类型、充值优惠、余额（为0）。并且在下方显示立即充值、查看历史充值、更换会员卡类型按钮。
	
		UI1.1.1 观众点击立即充值后，系统应显示购买弹窗，包含银行卡账号、密码、充值金额输入框。
	
			UI1.1.1.2 观众点击确认后，若银行卡账号和密码正确，系统应提示充值成功，并更新会员信息中的余额。
	
					UI1.1.1.2.1 若银行卡账号和密码为空，系统应提示银行卡账号和密码不为空。
	
					UI1.1.1.2.1 若银行卡账号和密码错误，系统应提示银行卡账号或密码错误。
	
		UI1.1.2  观众点击查看历史充值后，系统应显示历史充值弹窗，包含所有的历史充值记录（包括充值时间）。
		
		    UT1.1.2.1 观众点击某个历史充值记录，系统应扩展历史充值记录，显示详细的历史充值记录（包括充值金额、充入金额）。
	
		UI1.1.3 观众点击更换会员卡类型后，系统应显示购买弹窗，包含所有已发布的会员卡充值优惠策略列表、银行卡账号和密码输入框。
	
			UI1.1.3.1 观众点击选择某会员卡，输入银行卡账号和密码后，点击确认，系统应提示购买成功，更新会员信息中的充值优惠。
	
				UI1.1.3.1.1 若银行卡账号和密码为空，系统应提示银行卡账号和密码不为空。
	
				UI1.1.3.1.2 若银行卡账号和密码错误，系统应提示银行卡账号或密码错误。

UI2 观众电影票

	UI2.1 观众点击“电影票”时，系统显示用户购买过的所有订单的详细信息（包括：订单号、电影名称、影厅号、开始时间、结束时间）以及对应的所有电影票的详细信息（包括：座位号、电影票状态）。
	
		UI2.1.1 如果该订单尚未支付，系统应在订单详细信息中显示“继续支付”按钮。
	
		UI2.1.2 如果电影票状态为“支付已完成”，系统应在电影票详细信息中显示“取票”、“退票”按钮。
	
	UI2.2 观众点击订单详细信息中的“继续支付”按钮，系统应跳转到“电影票支付”界面。
	
	UI2.3 观众点击电影票详情中的“取票”按钮，系统显示取票界面，点击确认，系统更新电影票状态的显示。
	
	UI2.4 观众点击电影票详情中的“退票”按钮，系统显示退票界面，点击确认，系统更新电影票状态的显示。
	
		UI2.4.1 若银行卡账号为空，系统应提示银行卡账号不能为空。
	
		UI2.4.2 若观众选择的电影票不满足退票条件，系统应提示观众该电影票不允许退票。
	
		UI2.4.3 若观众在退票期间，退票策略被管理员修改，系统应提示观众退票策略被修改、需重新开始退票。

UI3消费记录

	UI3.1 观众点击“消费记录”时，系统显示用户的所有消费记录（包括时间）。
	
		UI3.1.1 观众点击某个“消费记录”，系统显示详细的消费记录（包括票价、消费金额）。

#### 3.1.4 通信接口

	CI: 客户端与服务器采用HTTP的方式进行通信。

### 3.2 功能需求

#### 3.2.1 会员卡充值优惠策略管理用例

##### 3.2.1.1 特征描述

当需要发布会员卡时，一个经过验证的管理员开始发布会员卡。
优先级=高

##### 3.2.1.2 刺激/响应序列

刺激：影院管理员提出发布或修改会员卡请求。
响应：系统等待管理员输入会员卡信息（会员卡价格、描述、优惠需满金额、赠送金额）。

刺激：管理员输入会员卡信息（会员卡价格、描述、优惠需满金额、赠送金额）。
响应：无。

刺激：管理员确认。
响应：系统更新已发布的会员卡信息，关闭当前任务。

刺激：管理员取消发布或修改会员卡。
响应：系统关闭本次会员卡任务。

##### 3.2.1.3 相关功能需求

| 功能点                                       | 需求                                                                              |
| -------------------------------------------- | --------------------------------------------------------------------------------- |
| StrategyManagement.input                     | 系统应该允许管理员在管理会员卡任务中进行键盘输入                                  |
| StrategyManagement.add                       | 系统应该允许管理员发布会员卡充值优惠策略                                          |
| StrategyManagement.add.End                   | 系统应在管理员指示下结束发布会员卡任务                                            |
| StrategyManagement.add.End.Update            | 在管理员要求结束发布会员卡任务时，系统增加数据，参见StrategyManagement.AddData    |
| StrategyManagement.AddData                   | 系统增加一项会员卡充值优惠策略                                                    |
| StrategyManagement.AddData.id                | 系统增加这项充值优惠策略的ID                                                      |
| StrategyManagement.AddData.price             | 系统增加这项充值优惠策略的价格                                                    |
| StrategyManagement.AddData.description       | 系统增加这项充值优惠策略的描述                                                    |
| StrategyManagement.AddData.targetAmount      | 系统增加这项充值优惠策略的优惠需满金额                                            |
| StrategyManagement.AddData.discountAmount    | 系统增加这项充值优惠策略的赠送金额                                                |
| StrategyManagement.modify                    | 系统应该允许管理员修改会员卡充值优惠策略                                          |
| StrategyManagement.modify.End                | 系统应在管理员指示下结束修改会员卡任务                                            |
| StrategyManagement.modify.End.Update         | 在管理员要求结束发布会员卡任务时，系统增加数据，参见StrategyManagement.UpdateData |
| StrategyManagement.UpdateData                | 系统增加一项会员卡充值优惠策略                                                    |
| StrategyManagement.UpdateData.price          | 系统修改这项充值优惠策略的价格                                                    |
| StrategyManagement.UpdateData.description    | 系统修改这项充值优惠策略的描述                                                    |
| StrategyManagement.UpdateData.targetAmount   | 系统修改这项充值优惠策略的优惠需满金额                                            |
| StrategyManagement.UpdateData.discountAmount | 系统修改这项充值优惠策略的赠送金额                                                |
| StrategyManagement.Cancel                    | 系统应该允许管理员要求取消发布或修改会员卡任务                                    |
| StrategyManagement.Cancel.Return             | 在管理员取消任务时，系统应允许管理员再次进入发布或修改会员卡任务                  |

#### 3.2.2 退票策略管理用例

##### 3.2.2.1 特征描述

当需要管理退票策略时，一个经过验证的管理员开始管理退票策略。

优先级=高

##### 3.2.2.2 刺激/响应序列

刺激：影院管理员提出新增或修改退票策略。
响应：系统等待管理员输入退票策略信息（是否允许退票、返还比例、距离开场前多久允许退票）。

刺激：管理员输入退票策略信息（是否允许退票、返还比例、距离开场前多久允许退票）并确认。
响应：系统更新该退票策略的信息，结束当前任务。

刺激：管理员取消本次的管理退票策略任务。
响应：系统取消本次退票策略管理任务。

##### 3.2.2.3 相关功能需求

| 功能点                                         | 需求                                                                                      |
| ---------------------------------------------- | ----------------------------------------------------------------------------------------- |
| RefundStrategyManagement.input                 | 系统应该允许管理员在管理退票策略任务重进行键盘输入                                        |
| RefundStrategyManagement.add                   | 系统应该允许管理员新增退票策略                                                           |
| RefundStrategyManagement.add.End               | 系统应在管理员指示下结束新增退票策略任务                                                  |
| RefundStrategyManagement.add.End.Update        | 在管理员要求结束新增退票策略任务时，系统应增加数据，参见RefundStrategyManagement.AddData  |
| RefundStrategyManagement.AddData               | 系统增加一项退票策略                                                                      |
| RefundStrategyManagement.AddData.id            | 系统增加这项退票策略的ID                                                                  |
| RefundStrategyManagement.AddData.refundable    | 系统增加这项退票策略是否允许退票                                                          |
| RefundStrategyManagement.AddData.ratio         | 系统增加这项退票策略的返还比例                                                           |
| RefundStrategyManagement.AddData.time          | 系统增加这项退票策略开场前允许退票的时间限制                                              |
| RefundStrategyManagement.modify                | 系统应该允许管理员修改退票策略                                                            |
| RefundStrategyManagement.modify.End            | 系统应在管理员指示下结束修改退票策略任务                                                  |
| RefundStrategyManagement.modify.End.Update     | 在管理员要求结束修改退票策略任务时，系统增加数据，参见RefundStrategyManagement.UpdateData |
| RefundStrategyManagement.Update                | 系统修改一项退票策略                                                                      |
| RefundStrategyManagement.UpdateData.refundable | 系统修改这项退票策略是否允许退票                                                          |
| RefundStrategyManagement.UpdateData.ratio      | 系统修改这项退票策略的返还比例                                                            |
| RefundStrategyManagement.UpdateData.time       | 系统修改这项退票策略开场前允许退票的时间限制                                              |
| RefundStrategyManagement.Cancel                | 系统应该允许管理员要求取消管理退票策略任务                                                |

#### 3.2.3 影厅信息管理用例

***徐志乐***

#### 3.2.4 赠送优惠券用例

##### 3.2.4.1 特征描述

当需要赠送优惠券给某些会员时，一个经过验证的管理员开始赠送优惠券。

优先级：高

##### 3.2.4.2 刺激/响应序列

刺激：管理员点击优惠券赠送。

响应：系统跳到优惠券赠送界面并显示会员列表。

刺激：管理员输入消费金额。

响应：系统更新消费金额超过输入金额的会员列表。

刺激：管理员选择会员点击赠送。

响应：系统显示有效优惠券。

刺激：管理员选择优惠券点击赠送按钮。

响应：系统赠送这些会员这些优惠券。

##### 3.2.4.3 相关功能需求

| 功能点                             | 需求                                                     |
| ---------------------------------- | -------------------------------------------------------- |
| CouponSendManagement.member        | 系统应该允许显示会员                                     |
| CouponSendManagement.member.input  | 系统应该允许管理员输入赠送优惠券的会员所需达到的消费金额 |
| CouponSendManagement.member.Update | 系统应该允许更新经过消费金额筛选的会员列表               |
| CouponSendManagement.coupon        | 系统应该允许显示优惠券                                   |
| CouponSendManagement.sendCoupon    | 系统应该允许赠送某些会员优惠券                           |
| CouponSendManagement.member.check  | 系统应该允许管理员选中会员                               |
| CouponSendManagement.coupon.check  | 系统应该允许管理员选中优惠券                             |
| CouponSendManagement.Cancel        | 系统应该允许管理员要求取赠送优惠券任务                   |



#### 3.2.5 取票用例

##### 3.2.5.1 特征描述

当需要取票时，一个经过验证的观众开始取票。
优先级=高

##### 3.2.5.2 刺激/响应序列

刺激：观众针对某一张电影票提出取票请求。
响应：系统显示该电影票的详细信息（电影票号、电影名称、影厅号、场次开始时间、场次结束时间、座位号）。

刺激：观众确认取票。
响应：系统关闭取票任务，更新该电影票的状态。

刺激：观众取消取票
响应：系统关闭取票任务。

##### 3.2.5.3 相关功能需求

| 功能点                            | 需求                               |
| --------------------------------- | ---------------------------------- |
| TicketManagement.choose           | 系统应该允许观众选择要取票的电影票 |
| TicketManagement.UpdateData       | 系统修改某个电影票                 |
| TicketManagement.UpdateData.state | 系统修改这个电影票的状态           |
| TicketManagement.Cancel           | 系统应该允许观众要求取消取票任务   |

#### 3.2.6 退票用例

##### 3.2.6.1 特征描述

当需要退票时，一个经过验证的观众开始退票。
优先级=高

##### 3.2.6.2 刺激/响应序列

刺激：观众针对某一张已支付但未取票的电影票提出退票请求。
响应：系统计算退款金额，显示该电影票的详细信息（电影票号、电影名称、影厅号、距离开影时间、座位号、实际支付、退款金额、银行卡号），并等待用户输入。

刺激：观众输入银行卡号并确认退票。
响应：系统结束退票任务并更新该电影票的状态。

刺激：观众取消退票。
响应：系统结束退票任务。

##### 3.2.6.3 相关功能需求

| 功能点                            | 需求                                     |
| --------------------------------- | ---------------------------------------- |
| TicketManagement.input            | 系统应该允许用户在退票任务中进行键盘输入 |
| TicketManagement.choose           | 系统应该允许观众选择要退票的电影票       |
| TicketManagement.UpdateData       | 系统修改某个电影票                       |
| TicketManagement.UpdateData.state | 系统修改这个电影票的状态                 |
| TicketManagement.Cancel           | 系统应该允许观众要求取消退票任务         |

#### 3.2.7 查看历史充值用例

##### 3.2.7.1 特征描述

当需要查看历史充值时，一个经过验证的观众开始查看历史充值。

优先级：高。

##### 3.2.7.2 刺激/响应序列

刺激：用户点击查看历史充值。

响应：系统显示历史充值。

刺激：用户点击某个历史充值。

响应：系统显示改历史充值的详情。

##### 3.2.7.3 相关功能需求

| 功能点                                                | 需求                                     |
| ----------------------------------------------------- | ---------------------------------------- |
| RechargeRecordManagement.record                       | 系统应该允许显示所有的充值记录           |
| RechargeRecordManagement.record.check                 | 系统应该允许观众选中充值记录             |
| RechargeRecordManagement.record.check.details         | 系统应该允许显示详细的充值记录           |
| RechargeRecordManagement.Cancel                       | 系统应该允许观众要求取消查看充值记录功能 |
| RechargeRecordManagement.record.time                  | 系统应该允许显示充值记录的时间           |
| RechargeRecordManagement.record.check.details.payment | 系统应该允许显示详细充值记录的冲入金额   |
| RechargeRecordManagement.record.check.details.amount  | 系统应该允许显示详细充值记录的充值金额   |



#### 3.2.8 查看历史消费用例

##### 3.2.8.1 特征描述

当需要查看历史充值时，一个经过验证的观众开始查看历史充值。

优先级：高。

##### 3.2.8.2 刺激/响应序列

刺激：用户点击查看历史消费。

响应：系统显示历史消费。

刺激：用户点击某个历史消费。

响应：系统显示改历史消费的详情。

##### 3.2.9.3 相关功能需求

| 功能点                                                   | 需求                                       |
| -------------------------------------------------------- | ------------------------------------------ |
| ConsumptionRecordManagement.record                       | 系统应该允许显示所有的消费记录             |
| ConsumptionRecordManagement.record.check                 | 系统应该允许观众选中消费记录               |
| ConsumptionRecordManagement.record.check.details         | 系统应该允许显示详细的消费记录             |
| ConsumptionRecordManagement.Cancel                       | 系统应该允许观众要求取消查看消费记录功能   |
| ConsumptionRecordManagement.record.check.details.amount  | 系统应该允许显示详细消费记录的金额         |
| ConsumptionRecordManagement.record.time                  | 系统应该允许显示消费记录的时间             |
| ConsumptionRecordManagement.record.check.details.payment | 系统应该允许显示详细消费记录的实际消费金额 |



#### 3.2.9 会员卡自我管理用例

##### 3.2.9.1 特征描述

当需要享受或更换会员卡充值优惠策略时，一个经过验证的观众开始购买或更换会员卡。
优先级=高

##### 3.2.9.2 刺激/响应序列

刺激：观众选择某将要购买的会员卡，提出购买会员卡请求。
响应：系统等待观众输入银行卡号和密码。

刺激：观众输入银行卡号和密码并确认。
响应：提示会员卡购买成功，显示新购买的会员卡的会员卡号、入会日期、会员卡类型、充值优惠、余额。

刺激：观众选择切换会员卡
响应：系统显示所有会员卡种类

刺激：观众选择某将要切换的会员卡。
响应：系统等待观众输入银行卡号和密码。

刺激：观众输入银行卡号和密码并确认。
响应：提示会员卡购买成功，显示切换的会员卡的会员卡号、入会日期、会员卡类型、充值优惠、余额。

##### 3.2.9.3 相关功能需求

| 功能点                                       | 需求                                                                              |
| -------------------------------------------- | --------------------------------------------------------------------------------- |
| Card.input            | 系统应该允许观众在购买或切换会员卡时进行键盘输入银行卡账号和密码 |
| Card.add | 系统应允许没有会员卡的观众新增会员卡 |
| Card.switch | 系统应允许已有会员卡的观众切换会员卡 |
| Card.AddData | 观众新增会员卡后，系统应该增加会员卡数据 |
| Card.AddData.ID | 系统增加会员卡的ID |
| Card.AddData.strategy | 系统增加会员卡使用的充值优惠策略 |
| Card.AddData.user | 系统增加会员卡的使用者 |
| Card.AddData.balance | 系统增加会员卡的余额为0 |
| Card.AddData.joinTime | 系统增加会员卡的办卡时间 |
| Card.AddData | 观众切换会员卡后，系统应该修改会员卡数据 |
| Card.UpdateData.strategy | 系统更新会员卡使用的充值优惠策略 |
| Card.UpadateData.joinTime | 系统增加会员卡的办卡时间 |

#### 3.2.10 影院角色的增删改查用例

***徐志乐***

### 3.3 非功能需求

#### 3.3.1  安全性

	Safety1: 系统应该只允许经过验证和授权的用户和管理员访问。
	
	Safety2: 系统中有2~3个管理员账号，该账号只允许管理员用户修改口令。
	
	Safety3：系统应该按照用户身份验证用户的访问权限。

#### 3.3.2  可维护性

	Modifinability1：如果系统要增加新的会员服务（例如赠送爆米花和影票打折），要能够在1个人月内完成。
	
	Modifinability2：如果系统要增加积分服务，要能够在2个人月内完成。
	
	Modifinability3：如果系统要增加支付方式，要能够在25个人月内完成。

#### 3.3.3  易用性

	Usability1：订票付款成功到出票成功，要在一分钟之内完成。

#### 3.3.4  可靠性

	Reliability1：在客户端与服务器通信时，如果网络故障，系统不能出现故障。
	
	​	Reliability1.1：客户端应该检测到故障，并尝试重新连接网络3次，每次15秒。
	
	  		Reliability1.1.1：重新连接后，客户端应该继续之前的工作。
	
	​		Reliability1.1.2：如果重新连接失败，客户端应该等待5分钟后再次尝试重新连接。
	
	​			Reliability1.1.2.1：重新连接后，客户端应该继续之前的工作。
	
	​			Reliability1.1.2.2：如果重新连接仍然不成功，客户端报警。

#### 3.3.5  业务规则

	BR1：适用（想看人数，日期）的电影排版规则。
	
	​	（想看人数多）参照日期的该电影分布多点电影场次。

#### 3.3.6  约束

	IC1: 系统要在网络上分布为一个服务器和多个客户端

### 3.4  数据需求

#### 3.4.1  数据定义

	Data1: 系统需要存储的数据实体及其关系参见体系结构文档。
	
	Data2：系统要存储两年的电影票销售、会员卡充值数据。

#### 3.4.2  默认数据

	默认数据用于以下两种情况：
	
	*系统中新增加数据时。
	
	*编辑数据时不小心将相关内容清空。
	
	Default1：用户想看电影的数量默认为0。
	
	Default2：费用的数据默认为0。
	
	Default3：用户的默认身份为观众。
	
	Default4：时间默认为当天。
	
	Default5：电影在列表下架原因默认为过了上映期。

#### 3.4.3  数据格式要求

	Format1：价格和费用的格式必须是大于等于0、精确到小数点后2位的浮点数，单位为元。
	
	Format2：电影想看人数必须是整数。
	
	Format3：日期的格式必须是YYYY-MM-DD。

### 3.5  其他

	安装需求
	
	Install1：在安装系统时，要初始化用户、电影信息等重要数据。
	
	Install2：系统投入使用时，需要对管理员进行三天的集中培训。
